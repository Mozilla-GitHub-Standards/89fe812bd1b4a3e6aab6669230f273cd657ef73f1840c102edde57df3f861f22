<% if (venue && venue.id) { %>
  <div class="map venue" style="background-image: url('<%= mapURL %>')"></div>

  <div class="venue-summary summary" id="venue-<%= venue.id %>">
    <div class="center">
      <h1><%= venue.name %></h1>

      <% if (venue.categories.length || venue.location.city) { %>
        <h3 class="category subheader">
          <% if (venue.categories.length) { %>
            <%= venue.categories[0].name %>
          <% } %>
          <% if (!isLocal) { %>
            <% if (venue.categories.length || venue.location.city) { %>
              <small><%= l('in') %>
            <% } %>
            <% if (venue.location.city) { %>
              <%= venue.location.city %>

              <% if (venue.categories.length) { %>
                </small>
              <% } %>
            <% } %>
          <% } %>
        </h3>
      <% } %>

      <% if (hours) { %>
        <h3 class="hours subheader"></h3>
      <% } else if (venue.hours && venue.hours.length && !venue.hours.isOpen) { %>
        <h3 class="hours subheader"><%= l('Closed right now') %></h3>
      <% } %>

      <% if (venue.price && venue.price.tier) { %>
        <h3 title="<%= venue.price.message %>">
          <%= l('Price:') %>

          <% for (var i = 1; i <= venue.price.tier; i++) { %>
            <i class="fa fa-circle"></i>
          <% } %>
          <% for (var i = 1; i <= (4 - venue.price.tier); i++) { %>
            <i class="fa fa-circle-o"></i>
          <% } %>
        </h3>
      <% } %>

      <button class="check-in" data-venue="<%= venue.id %>"><%= l('Check In') %></button>
    </div>

    <p><%= venue.description %></p>
  </div>

  <% if (tips) { %>
    <h1><%= l('Tips') %></h1>

    <ul class="venue tips">
      <% tips.forEach(function(tip) { %>
        <li class="tip">
          <p class="text"><%= tip.text %></p>

          <p class="author"><cite><a href="#/users/<%= tip.user.id %>"><%= tip.user.firstName %></a></cite></p>
        </li>
      <% }) %>
    </ul>
  <% } %>

  <% if (venue.photos) { %>
    <h1><%= l('Photos') %></h1>

    <ul class="venue photos">
      <% venue.photosInGroup("venue").forEach(function(photo) { %>
        <!-- TODO: Obviously, add a modal photo viewer -->
        <li><a class="photo" style="background-image: url(<%= photo.prefix %><%= photo.width %>x<%= photo.height %><%= photo.suffix %>);" href="<%= photo.prefix %><%= photo.width %>x<%= photo.height %><%= photo.suffix %>" target="_blank"></a></li>
      <% }) %>
    </ul>
  <% } %>

  <p class="attribution"><a href="https://foursquare.com/v/<%= venue.id %>?ref=<%= window.GLOBALS.CLIENT_ID %>" target="_blank"><%= l("See this venue on Foursquare's website.") %></a></p>
<% } else if (isLoading) { %>
  <div class="map venue"></div>

  <div class="venue-summary summary">
    <div class="center">
      <h1><%= l('Loading') %><span class="circle-small"></span></h1>
    </div>
  </div>
<% } else { %>
  <h2><%= l('Error') %></h2>

  <p><%= l('Venue not found.') %></p>
<% } %>
